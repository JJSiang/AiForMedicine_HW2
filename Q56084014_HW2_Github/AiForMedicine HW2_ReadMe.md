{%hackmd BkVfcTxlQ %}
# **AiForMedicine HW2_ReadMe**
###### tags: `2019 Fall AiForMedicine`
## 存放原始Data的資料夾"EKG_001_600"(需放入六百張原始影像)
**因Moodle上傳容量的限制，Moodle上的檔案EKG_001_600資料夾內沒有放入原始的600張影像，若需完整的檔案包，請至Github上下載!**
## **Q1**
執行HW2_Q1.py，會將600張照片分別切成12個導程，分別存在"Crop_Image">"EKG_001_600_1"、"EKG_001_600_2"、"EKG_001_600_3"、..."EKG_001_600_12"

## **Q2**
執行HW2_Q2.py，會先將原始影像切成Long lead II的部分存在"EKG"資料夾，切完後會讀取每張影像並計算心跳數目，
### 技術原理
主要原理是先將影像轉程轉成灰階影像，
灰階影像:
![](https://i.imgur.com/xMLkmot.png)
再從灰階影像用threshold轉程二值化影像，因此可得到二值化影像。
二值化影像:
![](https://i.imgur.com/iFjeU0Z.png)
有了二值化影像就能把心跳的波與背景分開來，黑的部分為0，白的部分為1
將影像轉成matrix，橫、列每個分別讀取。
1. 找尋峰值:
(以xy座標來看矩陣，左上角為(0,0)，x往右為正，y往下為正)，若x的y比x-1的y小，則找判斷(x,y)為峰值，
2. 濾波(把非心跳的小波濾掉):
找出所有峰值後，所有y值平均，若y在平均以下的，則全部濾掉，這樣即可排除非心跳的小波
3. 找最終的波的頂點:
重複步驟1的方法，即可逐步找到最後的心跳波峰值，並計算心跳個數(print出結果)
如以下圖(ex: 以1.jpg為例，30-15則為第一個波峰座標)，第二行的12則為此張影像的心跳數目:
![](https://i.imgur.com/mQR8xlf.png)

## **Q3**
切好每個心跳的圖檔存在"Crop_Image">"EKG"資料夾內
### 技術原理
有了第二題的每個波峰座標，即可算出第一個波峰與第二個波峰之間的距離，(第二個波峰的x-第一個波峰的x)/2，則是我所要的切線，有了切線x座標，即可將每個心跳的圖切開